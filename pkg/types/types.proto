// Code generated by go2proto. DO NOT EDIT.
syntax = "proto3";

option go_package = "github.com/beam-cloud/beta9/proto";
import "google/protobuf/timestamp.proto";

package types;


message BuildOptions {
  string source_image = 1;
  string dockerfile = 2;
  string build_ctx_object = 3;
  string source_image_creds = 4;
  repeated string build_secrets = 5;
}

message CheckpointState {
  string stub_id = 1;
  string container_id = 2;
  string status = 3;
  string remote_key = 4;
}

message ConcurrencyLimit {
  uint32 id = 1;
  string external_id = 2;
  uint32 gpu_limit = 3;
  uint32 cpu_millicore_limit = 4;
  google.protobuf.Timestamp created_at = 5;
  google.protobuf.Timestamp updated_at = 6;
}

message Container {
  string container_id = 1;
  string stub_id = 2;
  string status = 3;
  google.protobuf.Timestamp scheduled_at = 4;
  google.protobuf.Timestamp started_at = 5;
  string workspace_id = 6;
  string worker_id = 7;
  string machine_id = 8;
  string deployment_id = 9;
}

message ContainerRequest {
  string container_id = 1;
  repeated string entry_point = 2;
  repeated string env = 3;
  int64 cpu = 4;
  int64 memory = 5;
  string gpu = 6;
  repeated string gpu_request = 7;
  uint32 gpu_count = 8;
  string image_id = 9;
  string stub_id = 10;
  string workspace_id = 11;
  Workspace workspace = 12;
  StubWithRelated stub = 13;
  google.protobuf.Timestamp timestamp = 14;
  repeated Mount mounts = 15;
  int64 retry_count = 16;
  string pool_selector = 17;
  bool preemptable = 18;
  bool checkpoint_enabled = 19;
  BuildOptions build_options = 20;
  repeated uint32 ports = 21;
}

message ContainerState {
  string container_id = 1;
  string stub_id = 2;
  string status = 3;
  int64 scheduled_at = 4;
  string workspace_id = 5;
  string gpu = 6;
  uint32 gpu_count = 7;
  int64 cpu = 8;
  int64 memory = 9;
  int64 started_at = 10;
}

message Mount {
  string local_path = 1;
  string mount_path = 2;
  string link_path = 3;
  bool read_only = 4;
  string mount_type = 5;
  MountPointConfig mount_point_config = 6;
}

message MountPointConfig {
  string bucket_name = 1;
  string access_key = 2;
  string secret_key = 3;
  string endpoint_url = 4;
  string region = 5;
  bool read_only = 6;
}

message Object {
  uint32 id = 1;
  string external_id = 2;
  string hash = 3;
  int64 size = 4;
  uint32 workspace_id = 5;
  google.protobuf.Timestamp created_at = 6;
}

message Stub {
  uint32 id = 1;
  string external_id = 2;
  string name = 3;
  string type = 4;
  string config = 5;
  uint32 config_version = 6;
  uint32 object_id = 7;
  uint32 workspace_id = 8;
  google.protobuf.Timestamp created_at = 9;
  google.protobuf.Timestamp updated_at = 10;
  bool public = 11;
}

message StubWithRelated {
  Stub stub = 1;
  Workspace workspace = 2;
  Object object = 3;
}

message Worker {
  string id = 1;
  string status = 2;
  int64 total_cpu = 3;
  int64 total_memory = 4;
  uint32 total_gpu_count = 5;
  int64 free_cpu = 6;
  int64 free_memory = 7;
  uint32 free_gpu_count = 8;
  string gpu = 9;
  string pool_name = 10;
  string machine_id = 11;
  int64 resource_version = 12;
  bool requires_pool_selector = 13;
  int32 priority = 14;
  bool preemptable = 15;
  string build_version = 16;
  repeated Container active_containers = 17;
}

message WorkerPoolState {
  string status = 1;
  int64 scheduling_latency = 2;
  uint32 free_gpu = 3;
  int64 free_cpu = 4;
  int64 free_memory = 5;
  int64 pending_workers = 6;
  int64 available_workers = 7;
  int64 pending_containers = 8;
  int64 running_containers = 9;
  int64 registered_machines = 10;
  int64 pending_machines = 11;
}

message Workspace {
  uint32 id = 1;
  string external_id = 2;
  string name = 3;
  google.protobuf.Timestamp created_at = 4;
  google.protobuf.Timestamp updated_at = 5;
  string signing_key = 6;
  bool volume_cache_enabled = 7;
  bool multi_gpu_enabled = 8;
  uint32 concurrency_limit_id = 9;
  ConcurrencyLimit concurrency_limit = 10;
}

