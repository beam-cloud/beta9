dev:
  beam:
    image: okteto.dev/beam:latest
    command: ["/workspace/bin/hotreload.sh"]
    sync:
      - ../:/workspace
    environment:
      PATH: ${PATH}:/workspace/bin
      DEFAULT_NAMESPACE: ${OKTETO_NAMESPACE}
      BUILD_COMMAND: "go build -buildmode=plugin -o build.so /workspace/internal/plugins/build/build.go && go build -o /workspace/bin/beam /workspace/cmd/beam/main.go && go build -o /workspace/bin/runner /workspace/cmd/runner/main.go"
      BUILD_BINARY_PATH: "/workspace/bin/runner"
      CONFIG_PATH: "/workspace/.secrets"
    forward:
      - 1993:1993
