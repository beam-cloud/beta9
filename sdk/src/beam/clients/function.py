# Generated by the protocol buffer compiler.  DO NOT EDIT!
# sources: function.proto
# plugin: python-betterproto
from dataclasses import dataclass
from typing import AsyncGenerator

import betterproto
import grpclib


@dataclass
class FunctionInvokeRequest(betterproto.Message):
    object_id: str = betterproto.string_field(1)
    image_id: str = betterproto.string_field(2)
    args: bytes = betterproto.bytes_field(3)
    handler: str = betterproto.string_field(4)


@dataclass
class FunctionInvokeResponse(betterproto.Message):
    output: str = betterproto.string_field(1)
    done: bool = betterproto.bool_field(2)
    exit_code: int = betterproto.uint32_field(3)


@dataclass
class FunctionGetArgsRequest(betterproto.Message):
    pass


@dataclass
class FunctionGetArgsResponse(betterproto.Message):
    pass


class FunctionServiceStub(betterproto.ServiceStub):
    async def function_invoke(
        self,
        *,
        object_id: str = "",
        image_id: str = "",
        args: bytes = b"",
        handler: str = "",
    ) -> AsyncGenerator[FunctionInvokeResponse, None]:
        request = FunctionInvokeRequest()
        request.object_id = object_id
        request.image_id = image_id
        request.args = args
        request.handler = handler

        async for response in self._unary_stream(
            "/function.FunctionService/FunctionInvoke",
            request,
            FunctionInvokeResponse,
        ):
            yield response

    async def function_get_args(self) -> FunctionGetArgsResponse:
        request = FunctionGetArgsRequest()

        return await self._unary_unary(
            "/function.FunctionService/FunctionGetArgs",
            request,
            FunctionGetArgsResponse,
        )
